<app-panel-vertical>
    @if(location) {
    <h3>{{ getStructure(character.coordinates.structure)?.label || location.name }}</h3>
    <p>{{ getStructure(character.coordinates.structure)?.description || location.description }}</p>

    @if(!character.coordinates.structure) {
    <div class="location-row">
        <div class="tile-grid" [style.--rows]="location.sizeY" [style.--cols]="location.sizeX">
            @for (row of tiles; track $index;) {
            @for (tile of row; track $index;) {
            <app-tooltip>
                <div tooltip-target class="tile" [ngClass]="tile.type" (click)="onTileClick(tile)">
                </div>

                @if(tile.type === 'structure' || tile.type === 'connection') {
                <div tooltip-content>
                    @if(tile.type === 'structure') {
                    <strong>{{ tile.content.label }}</strong><br />
                    {{ tile.content.description }}
                    }
                    @if(tile.type === 'connection') {
                    <strong>Connection</strong><br />
                    Leads to: {{ tile.content.destination }}
                    }
                </div>
                }
            </app-tooltip>
            }
            }
        </div>
    </div>
    }

    @if(character.coordinates.structure) {
    <app-button text="Leave" (clickEvent)="onStructureClick('')"></app-button>
    }

    } @else {
    <app-loading></app-loading>
    }
</app-panel-vertical>
